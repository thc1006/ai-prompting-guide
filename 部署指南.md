# Docusaurus AI 提示詞指南完整部署手冊

## 目錄

1. [項目概述](#項目概述)
2. [環境準備](#環境準備)
3. [從零開始建立項目](#從零開始建立項目)
4. [本地開發環境配置](#本地開發環境配置)
5. [GitHub 倉庫設置](#github-倉庫設置)
6. [GitHub Pages 配置](#github-pages-配置)
7. [自動化部署配置](#自動化部署配置)
8. [手動部署流程](#手動部署流程)
9. [常見問題排除](#常見問題排除)
10. [維護和更新程序](#維護和更新程序)
11. [性能優化建議](#性能優化建議)
12. [安全性考量](#安全性考量)

## 項目概述

本項目是一個基於 Docusaurus 3.8.1 的 AI 提示詞指南文檔網站，具備以下特色：

- **技術棧**: React 18 + Docusaurus + GitHub Actions
- **部署平台**: GitHub Pages
- **支援功能**: 
  - Mermaid 圖表渲染
  - 數學公式支援 (KaTeX)
  - 多語言部落格系統
  - 自動化 CI/CD 部署
  - 性能監控 (Lighthouse)

## 環境準備

### 系統要求

**基本要求：**
- 作業系統: Windows 10/11, macOS 10.15+, 或 Linux (Ubuntu 18+)
- 記憶體: 最少 4GB RAM (建議 8GB 以上)
- 硬碟空間: 至少 2GB 可用空間

**必要軟體：**

1. **Node.js 18 或更高版本**
   ```bash
   # 檢查版本
   node --version  # 應該顯示 v18.0.0 或更高
   npm --version   # 應該顯示 8.0.0 或更高
   ```

2. **Git 版本控制系統**
   ```bash
   # 檢查是否已安裝
   git --version
   ```

3. **代碼編輯器** (推薦)
   - Visual Studio Code
   - WebStorm
   - Sublime Text

### 軟體安裝步驟

#### Windows 用戶

1. **安裝 Node.js**
   - 前往 [Node.js 官網](https://nodejs.org/)
   - 下載 LTS 版本 (Long Term Support)
   - 執行安裝程式，確保勾選 "Add to PATH" 選項
   - 重新開啟命令提示字元或 PowerShell

2. **安裝 Git**
   - 前往 [Git 官網](https://git-scm.com/download/windows)
   - 下載並安裝 Git for Windows
   - 安裝過程中保持預設設定即可

3. **配置 Git**
   ```bash
   git config --global user.name "你的姓名"
   git config --global user.email "your.email@example.com"
   ```

#### macOS 用戶

1. **安裝 Homebrew** (套件管理器)
   ```bash
   /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
   ```

2. **安裝 Node.js 和 Git**
   ```bash
   brew install node git
   ```

3. **配置 Git**
   ```bash
   git config --global user.name "你的姓名"
   git config --global user.email "your.email@example.com"
   ```

#### Linux (Ubuntu/Debian) 用戶

1. **更新套件列表**
   ```bash
   sudo apt update
   ```

2. **安裝 Node.js (使用 NodeSource)**
   ```bash
   curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
   sudo apt-get install -y nodejs
   ```

3. **安裝 Git**
   ```bash
   sudo apt install git
   ```

4. **配置 Git**
   ```bash
   git config --global user.name "你的姓名"
   git config --global user.email "your.email@example.com"
   ```

## 從零開始建立項目

### 選項 1: 複製現有項目

如果你已經有現有的 AI 提示詞指南項目：

```bash
# 複製項目到本地
git clone https://github.com/your-username/ai-prompting-guide.git

# 進入項目目錄
cd ai-prompting-guide

# 安裝依賴
npm install

# 啟動開發伺服器
npm start
```

### 選項 2: 從頭建立新項目

```bash
# 使用 Docusaurus 腳手架建立項目
npx create-docusaurus@latest ai-prompting-guide classic --typescript

# 進入項目目錄
cd ai-prompting-guide

# 安裝額外依賴
npm install @docusaurus/theme-mermaid remark-math rehype-katex
```

### 項目結構說明

建立完成後，你的項目結構應該如下：

```
ai-prompting-guide/
├── blog/                          # 部落格文章
│   ├── 2024-08-10-prompt-optimization-case-study.md
│   ├── 2024-08-15-chain-of-thought-production.md
│   ├── 2024-08-20-prompt-engineering-fundamentals.md
│   └── authors.yml
├── docs/                          # 文檔內容
│   ├── advanced/                  # 進階技術
│   ├── best-practices/           # 最佳實踐
│   ├── fundamentals/             # 基礎知識
│   ├── tutorial-basics/          # 基礎教程
│   ├── tutorial-extras/          # 進階教程
│   ├── tutorials/                # 實戰教程
│   └── intro.md                  # 介紹頁面
├── src/                          # 源代碼
│   ├── components/               # React 組件
│   ├── css/                      # 樣式文件
│   └── pages/                    # 頁面文件
├── static/                       # 靜態資源
│   └── img/                      # 圖片資源
├── .github/                      # GitHub 配置
│   └── workflows/                # 自動化流程
├── docusaurus.config.js          # 主配置文件
├── sidebars.js                   # 側邊欄配置
├── package.json                  # 項目依賴
└── README.md                     # 項目說明
```

## 本地開發環境配置

### 1. 環境變數設定

建立 `.env.local` 文件 (僅用於本地開發)：

```bash
# .env.local
DOCUSAURUS_URL=http://localhost:3000
DOCUSAURUS_BASE_URL=/
NODE_ENV=development
```

### 2. 配置文件調整

**docusaurus.config.js 重要設定：**

```javascript
const config = {
  title: 'AI 提示詞指南',
  tagline: '掌握有效的 AI 提示詞技術',
  favicon: 'img/favicon.ico',

  // 生產環境 URL (需要根據你的實際情況修改)
  url: 'https://your-username.github.io',
  baseUrl: '/ai-prompting-guide/',

  // GitHub Pages 部署配置
  organizationName: 'your-username', // 你的 GitHub 用戶名
  projectName: 'ai-prompting-guide', // 你的倉庫名稱

  // 國際化設定
  i18n: {
    defaultLocale: 'zh-Hant',
    locales: ['zh-Hant', 'en'],
  },

  // 主題配置
  themeConfig: {
    navbar: {
      title: 'AI 提示詞指南',
      logo: {
        alt: 'AI 提示詞指南 Logo',
        src: 'img/logo.svg',
      },
      items: [
        {
          type: 'docSidebar',
          sidebarId: 'tutorialSidebar',
          position: 'left',
          label: '教程',
        },
        {to: '/blog', label: '部落格', position: 'left'},
        {
          href: 'https://github.com/your-username/ai-prompting-guide',
          label: 'GitHub',
          position: 'right',
        },
      ],
    },
    footer: {
      style: 'dark',
      copyright: `版權所有 © ${new Date().getFullYear()} AI 提示詞指南. 使用 Docusaurus 建構.`,
    },
  },
};
```

### 3. 本地開發命令

```bash
# 啟動開發伺服器
npm start
# 或者
npm run dev

# 清理緩存
npm run clear

# 建構生產版本
npm run build

# 預覽生產版本
npm run serve

# 類型檢查
npm run typecheck

# 代碼檢查和格式化
npm run lint
npm run format
```

### 4. 開發伺服器設定

開發伺服器會在 `http://localhost:3000` 啟動，支援：

- **熱重載**: 文件修改後自動刷新
- **錯誤提示**: 即時顯示編譯錯誤
- **跨平台支援**: 支援所有主流作業系統

## GitHub 倉庫設置

### 1. 建立 GitHub 倉庫

1. **登入 GitHub**
   - 前往 [github.com](https://github.com)
   - 登入你的帳戶

2. **建立新倉庫**
   - 點擊右上角的 "+" 按鈕
   - 選擇 "New repository"
   - 倉庫名稱: `ai-prompting-guide`
   - 描述: `A comprehensive guide to AI prompting techniques and best practices`
   - 選擇 "Public" (GitHub Pages 免費版需要公開倉庫)
   - 不要勾選 "Initialize with README" (因為我們已經有本地代碼)

3. **連接本地倉庫**
   ```bash
   # 在項目根目錄執行
   git init
   git add .
   git commit -m "Initial commit: AI prompting guide setup"
   
   # 添加遠端倉庫
   git remote add origin https://github.com/your-username/ai-prompting-guide.git
   
   # 推送代碼
   git branch -M main
   git push -u origin main
   ```

### 2. 倉庫設定配置

#### 基本設定

1. **進入倉庫設定**
   - 在倉庫頁面點擊 "Settings" 標籤

2. **配置倉庫資訊**
   - **Description**: 添加項目描述
   - **Website**: 稍後會是 GitHub Pages 的 URL
   - **Topics**: 添加標籤如 `docusaurus`, `ai`, `prompting`, `guide`

#### 權限設定

1. **Actions 權限**
   - 進入 Settings > Actions > General
   - 在 "Workflow permissions" 部分
   - 選擇 "Read and write permissions"
   - 勾選 "Allow GitHub Actions to create and approve pull requests"

2. **Pages 權限**
   - 確保倉庫是 Public 或升級到 GitHub Pro

### 3. 分支保護設定 (建議)

1. **進入分支設定**
   - Settings > Branches
   - 點擊 "Add rule"

2. **保護規則配置**
   - Branch name pattern: `main`
   - 勾選 "Require status checks to pass before merging"
   - 勾選 "Require branches to be up to date before merging"
   - 選擇 "build" 和 "deploy" 檢查項

## GitHub Pages 配置

### 1. 啟用 GitHub Pages

1. **進入 Pages 設定**
   - 在倉庫中前往 Settings > Pages

2. **配置部署來源**
   - Source: 選擇 "GitHub Actions"
   - 不需要選擇分支 (因為我們使用 Actions 自動部署)

3. **自訂域名** (可選)
   - 如果有自己的域名，可以在 "Custom domain" 填入
   - 例如: `ai-guide.yourdomain.com`

### 2. 域名配置 (如果使用自訂域名)

1. **DNS 設定**
   - 在你的域名提供商設定 CNAME 記錄
   - 指向: `your-username.github.io`

2. **HTTPS 設定**
   - GitHub 會自動提供 Let's Encrypt SSL 證書
   - 勾選 "Enforce HTTPS"

### 3. 更新配置文件

修改 `docusaurus.config.js` 中的 URL 設定：

```javascript
const config = {
  // 如果使用 GitHub Pages 預設域名
  url: 'https://your-username.github.io',
  baseUrl: '/ai-prompting-guide/',

  // 如果使用自訂域名
  // url: 'https://your-custom-domain.com',
  // baseUrl: '/',

  // GitHub 配置
  organizationName: 'your-username',
  projectName: 'ai-prompting-guide',
};
```

## 自動化部署配置

### 1. GitHub Actions 工作流程

建立 `.github/workflows/deploy.yml`：

```yaml
name: 部署到 GitHub Pages

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build:
    name: 建構和部署
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pages: write
      id-token: write

    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}

    steps:
    - name: 檢出代碼
      uses: actions/checkout@v4
      with:
        fetch-depth: 0

    - name: 設置 Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'

    - name: 安裝依賴
      run: npm ci

    - name: 建構網站
      run: |
        npm run build
      env:
        NODE_ENV: production
        DOCUSAURUS_URL: ${{ vars.DOCUSAURUS_URL || 'https://your-username.github.io' }}
        DOCUSAURUS_BASE_URL: ${{ vars.DOCUSAURUS_BASE_URL || '/ai-prompting-guide/' }}

    - name: 設置 Pages
      uses: actions/configure-pages@v4

    - name: 上傳 artifact
      uses: actions/upload-pages-artifact@v3
      with:
        path: build

    - name: 部署到 GitHub Pages
      id: deployment
      uses: actions/deploy-pages@v4

  lighthouse:
    name: Lighthouse 性能檢查
    runs-on: ubuntu-latest
    needs: build
    if: success()

    steps:
    - name: 檢出代碼
      uses: actions/checkout@v4

    - name: 等待部署完成
      run: sleep 30

    - name: Lighthouse CI
      uses: treosh/lighthouse-ci-action@v10
      with:
        urls: |
          https://your-username.github.io/ai-prompting-guide/
        configPath: ./.lighthouserc.js
        uploadArtifacts: true
        temporaryPublicStorage: true
```

### 2. Lighthouse 配置

建立 `.lighthouserc.js`：

```javascript
module.exports = {
  ci: {
    collect: {
      numberOfRuns: 3,
      settings: {
        chromeFlags: '--no-sandbox --disable-dev-shm-usage',
      },
    },
    assert: {
      assertions: {
        'categories:performance': ['warn', { minScore: 0.8 }],
        'categories:accessibility': ['warn', { minScore: 0.9 }],
        'categories:best-practices': ['warn', { minScore: 0.8 }],
        'categories:seo': ['warn', { minScore: 0.8 }],
        'categories:pwa': 'off',
      },
    },
    upload: {
      target: 'temporary-public-storage',
    },
  },
};
```

### 3. 部署健康檢查腳本

建立 `.github/scripts/deployment-check.js`：

```javascript
const https = require('https');
const url = process.env.SITE_URL || 'https://your-username.github.io/ai-prompting-guide/';

console.log(`檢查部署狀況: ${url}`);

const checkDeployment = () => {
  return new Promise((resolve, reject) => {
    const startTime = Date.now();
    
    const req = https.get(url, (res) => {
      const responseTime = Date.now() - startTime;
      
      if (res.statusCode === 200) {
        console.log(`✅ 部署成功!`);
        console.log(`📊 響應時間: ${responseTime}ms`);
        console.log(`🌐 狀態碼: ${res.statusCode}`);
        resolve({ success: true, responseTime, statusCode: res.statusCode });
      } else {
        reject(new Error(`部署失敗，狀態碼: ${res.statusCode}`));
      }
    });

    req.on('error', (error) => {
      reject(new Error(`網路錯誤: ${error.message}`));
    });

    req.setTimeout(10000, () => {
      req.destroy();
      reject(new Error('請求超時'));
    });
  });
};

// 執行檢查
checkDeployment()
  .then((result) => {
    console.log('🎉 部署健康檢查通過!');
    process.exit(0);
  })
  .catch((error) => {
    console.error('❌ 部署健康檢查失敗:', error.message);
    process.exit(1);
  });
```

### 4. 環境變數設定

在 GitHub 倉庫中設定環境變數：

1. **進入設定**
   - Settings > Secrets and variables > Actions

2. **添加變數**
   - Variables 標籤下添加：
     - `DOCUSAURUS_URL`: `https://your-username.github.io`
     - `DOCUSAURUS_BASE_URL`: `/ai-prompting-guide/`

## 手動部署流程

### 1. 本地建構和部署

```bash
# 清理之前的建構
npm run clear

# 建構生產版本
npm run build

# 預覽建構結果
npm run serve

# 檢查建構輸出
ls -la build/

# 使用 Docusaurus 內建部署命令
GIT_USER=your-username npm run deploy
```

### 2. 驗證部署

```bash
# 檢查遠端分支
git branch -r

# 檢查 gh-pages 分支
git checkout gh-pages
git log --oneline -5
git checkout main
```

### 3. 手動觸發 Actions

1. **通過 GitHub 介面**
   - 前往 Actions 標籤
   - 選擇 "部署到 GitHub Pages" 工作流程
   - 點擊 "Run workflow"

2. **通過 Git 推送**
   ```bash
   # 任何推送到 main 分支的提交都會觸發部署
   git add .
   git commit -m "更新文檔內容"
   git push origin main
   ```

## 常見問題排除

### 建構問題

#### 問題 1: Node.js 版本不相容
```
錯誤: Node.js version 16.x is not supported
```

**解決方案:**
```bash
# 檢查當前版本
node --version

# 升級到 Node.js 18+
# 使用 nvm (推薦)
nvm install 18
nvm use 18

# 或直接從官網下載安裝
```

#### 問題 2: 依賴安裝失敗
```
錯誤: npm ERR! peer dep missing
```

**解決方案:**
```bash
# 清理 node_modules 和 package-lock.json
rm -rf node_modules package-lock.json

# 重新安裝
npm install

# 如果仍有問題，嘗試
npm install --legacy-peer-deps
```

#### 問題 3: 記憶體不足錯誤
```
錯誤: JavaScript heap out of memory
```

**解決方案:**
```bash
# 增加 Node.js 記憶體限制
export NODE_OPTIONS="--max_old_space_size=4096"
npm run build

# 或者在 package.json 中修改腳本
"build": "NODE_OPTIONS='--max_old_space_size=4096' docusaurus build"
```

### 部署問題

#### 問題 1: GitHub Pages 無法存取
```
錯誤: 404 - Site not found
```

**解決方案:**
1. 檢查倉庫是否為 Public
2. 確認 Pages 設定正確
3. 檢查 `docusaurus.config.js` 中的 URL 設定
4. 等待 DNS 傳播 (最多 24 小時)

#### 問題 2: Actions 權限錯誤
```
錯誤: Permission denied to github-actions
```

**解決方案:**
1. 前往 Settings > Actions > General
2. 選擇 "Read and write permissions"
3. 勾選 "Allow GitHub Actions to create and approve pull requests"

#### 問題 3: 自動部署失敗
```
錯誤: Build failed with exit code 1
```

**解決方案:**
1. 檢查 Actions 日誌詳細錯誤
2. 確認所有環境變數設定正確
3. 在本地執行 `npm run build` 測試
4. 檢查是否有語法錯誤或損壞的連結

### 內容問題

#### 問題 1: 圖片無法顯示
```
錯誤: Image not found
```

**解決方案:**
```bash
# 確保圖片放在 static/img/ 目錄
# 使用正確的路徑引用
![圖片描述](/img/your-image.png)

# 不要使用相對路徑
# ❌ ![圖片描述](./images/image.png)
# ✅ ![圖片描述](/img/image.png)
```

#### 問題 2: Mermaid 圖表不顯示
```
錯誤: Mermaid diagram not rendering
```

**解決方案:**
```javascript
// 確保在 docusaurus.config.js 中配置了 Mermaid
module.exports = {
  markdown: {
    mermaid: true,
  },
  themes: ['@docusaurus/theme-mermaid'],
};
```

#### 問題 3: 數學公式不渲染
```
錯誤: LaTeX formula not displayed
```

**解決方案:**
```bash
# 確保安裝了必要的套件
npm install remark-math rehype-katex

# 在 docusaurus.config.js 中配置
presets: [
  [
    'classic',
    {
      docs: {
        remarkPlugins: [require('remark-math')],
        rehypePlugins: [require('rehype-katex')],
      },
    },
  ],
],
stylesheets: [
  {
    href: 'https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css',
    type: 'text/css',
    integrity: 'sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM',
    crossorigin: 'anonymous',
  },
],
```

### 性能問題

#### 問題 1: 載入速度慢
**解決方案:**
1. 優化圖片大小和格式
2. 啟用代碼分割
3. 使用 CDN 加速靜態資源
4. 檢查 Lighthouse 報告建議

#### 問題 2: 建構時間過長
**解決方案:**
1. 啟用 npm 緩存
2. 使用 SWC 編譯器
3. 減少不必要的依賴
4. 分階段建構

## 維護和更新程序

### 定期維護任務

#### 每週任務

1. **檢查自動部署狀態**
   ```bash
   # 檢查最近的部署狀況
   curl -s https://api.github.com/repos/your-username/ai-prompting-guide/actions/runs | jq '.workflow_runs[0:5]'
   ```

2. **監控網站性能**
   - 檢查 Lighthouse 報告
   - 監控載入速度
   - 檢查錯誤日誌

3. **內容審核**
   - 檢查損壞的連結
   - 更新過時的資訊
   - 修正拼字錯誤

#### 每月任務

1. **依賴更新**
   ```bash
   # 檢查過時的依賴
   npm outdated

   # 更新依賴 (小版本)
   npm update

   # 檢查安全漏洞
   npm audit
   npm audit fix
   ```

2. **性能優化**
   - 分析 bundle 大小
   - 優化圖片資源
   - 檢查載入性能

3. **備份**
   - 備份重要內容
   - 匯出數據和配置

#### 每季任務

1. **大版本更新**
   ```bash
   # 檢查 Docusaurus 新版本
   npm info @docusaurus/core versions --json

   # 更新到新版本 (謹慎執行)
   npm install @docusaurus/core@latest @docusaurus/preset-classic@latest
   ```

2. **安全審核**
   - 檢查 GitHub 安全警告
   - 更新依賴到安全版本
   - 審核權限設定

3. **架構評估**
   - 評估是否需要架構調整
   - 檢查新功能和改進
   - 規劃下一階段開發

### 內容更新流程

#### 1. 新增文章

```bash
# 建立新的 Markdown 文件
touch docs/new-topic/article-name.md

# 或者新增部落格文章
touch blog/2024-12-22-new-post.md
```

#### 2. 更新現有內容

```bash
# 修改文件後提交
git add docs/modified-file.md
git commit -m "更新: 修改提示詞最佳實踐內容"
git push origin main
```

#### 3. 批量更新

```bash
# 使用腳本批量處理
npm run format  # 格式化所有文件
npm run lint:fix  # 自動修復程式碼問題
```

### 版本管理

#### 1. 語意化版本控制

```bash
# 使用 Git 標籤管理版本
git tag -a v1.0.0 -m "版本 1.0.0: 初始發布"
git push origin v1.0.0

# 檢視所有版本
git tag -l
```

#### 2. 變更日誌

維護 `CHANGELOG.md` 文件:

```markdown
# 變更日誌

## [1.1.0] - 2024-12-22
### 新增
- 新增進階提示詞技術章節
- 添加 Mermaid 圖表支援

### 修改
- 優化首頁載入性能
- 更新依賴到最新版本

### 修復
- 修復移動端顯示問題
- 解決圖片載入錯誤
```

#### 3. 分支策略

```bash
# 功能開發分支
git checkout -b feature/new-prompting-techniques
git push -u origin feature/new-prompting-techniques

# 完成後合併到主分支
git checkout main
git merge feature/new-prompting-techniques
git push origin main
```

## 性能優化建議

### 建構優化

#### 1. Webpack 優化

在 `docusaurus.config.js` 中添加：

```javascript
module.exports = {
  webpack: {
    jsLoader: (isServer) => ({
      loader: require.resolve('swc-loader'),
      options: {
        jsc: {
          parser: {
            syntax: 'typescript',
            tsx: true,
          },
          target: 'es2017',
        },
        module: {
          type: isServer ? 'commonjs' : 'es6',
        },
      },
    }),
  },
};
```

#### 2. 代碼分割

```javascript
// 在 React 組件中使用動態導入
const HeavyComponent = React.lazy(() => import('./HeavyComponent'));

function MyPage() {
  return (
    <React.Suspense fallback={<div>載入中...</div>}>
      <HeavyComponent />
    </React.Suspense>
  );
}
```

#### 3. 圖片優化

```bash
# 使用 WebP 格式
# 壓縮圖片大小
# 使用適當的解析度

# 自動化圖片優化腳本
npm install --save-dev imagemin imagemin-webp imagemin-pngquant
```

### 執行時優化

#### 1. 預載入和預取

```javascript
// 在 docusaurus.config.js 中配置
module.exports = {
  headTags: [
    {
      tagName: 'link',
      attributes: {
        rel: 'preload',
        href: '/fonts/font.woff2',
        as: 'font',
        type: 'font/woff2',
        crossorigin: 'anonymous',
      },
    },
  ],
};
```

#### 2. CDN 配置

```javascript
// 使用 CDN 加速靜態資源
module.exports = {
  url: 'https://your-username.github.io',
  baseUrl: '/ai-prompting-guide/',
  staticDirectories: ['static'],
  
  // 配置 CDN
  themes: [],
  stylesheets: [
    'https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css',
  ],
};
```

#### 3. 快取策略

```javascript
// Service Worker 配置
module.exports = {
  plugins: [
    [
      '@docusaurus/plugin-pwa',
      {
        debug: false,
        offlineModeActivationStrategies: ['appInstalled', 'standalone', 'queryString'],
        pwaHead: [
          {
            tagName: 'link',
            rel: 'icon',
            href: '/img/logo.png',
          },
          {
            tagName: 'link',
            rel: 'manifest',
            href: '/manifest.json',
          },
        ],
      },
    ],
  ],
};
```

### 監控和分析

#### 1. Google Analytics 整合

```javascript
// 在 docusaurus.config.js 中添加
module.exports = {
  plugins: [
    [
      '@docusaurus/plugin-google-gtag',
      {
        trackingID: 'G-XXXXXXXXXX',
        anonymizeIP: true,
      },
    ],
  ],
};
```

#### 2. 性能監控

```bash
# 安裝性能監控工具
npm install --save-dev web-vitals

# 建立性能監控腳本
echo "import {getCLS, getFID, getFCP, getLCP, getTTFB} from 'web-vitals';" > src/performance.js
```

#### 3. 錯誤追蹤

```javascript
// 整合 Sentry 或其他錯誤追蹤服務
import * as Sentry from '@sentry/browser';

Sentry.init({
  dsn: 'YOUR_SENTRY_DSN',
});
```

## 安全性考量

### 1. 依賴安全

#### 定期安全檢查

```bash
# 檢查已知漏洞
npm audit

# 自動修復
npm audit fix

# 強制修復 (謹慎使用)
npm audit fix --force

# 使用 Snyk 進行更深入的檢查
npx snyk test
```

#### 依賴鎖定

```bash
# 使用 package-lock.json 鎖定版本
npm ci  # 而不是 npm install

# 定期更新鎖定文件
npm update
```

### 2. 內容安全

#### CSP 配置

在 `docusaurus.config.js` 中添加：

```javascript
module.exports = {
  headTags: [
    {
      tagName: 'meta',
      attributes: {
        'http-equiv': 'Content-Security-Policy',
        content: "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline';",
      },
    },
  ],
};
```

#### 輸入驗證

```javascript
// 對用戶輸入進行驗證和清理
import DOMPurify from 'dompurify';

function sanitizeContent(content) {
  return DOMPurify.sanitize(content);
}
```

### 3. 部署安全

#### GitHub Actions 安全

```yaml
# 在 .github/workflows/deploy.yml 中使用最小權限
permissions:
  contents: read
  pages: write
  id-token: write

# 使用官方 Actions
- uses: actions/checkout@v4  # 指定版本
- uses: actions/setup-node@v4
```

#### 環境變數保護

```bash
# 使用 GitHub Secrets 儲存敏感資訊
# 不要在代碼中硬編碼 API 金鑰或密碼

# 在 GitHub Settings > Secrets 中添加:
# - API_KEY
# - DATABASE_URL
# 等敏感資訊
```

### 4. 存取控制

#### 分支保護

```bash
# 設定分支保護規則
# - 要求 PR 審核
# - 要求狀態檢查通過
# - 要求分支為最新

# GitHub CLI 設定範例
gh api repos/:owner/:repo/branches/main/protection \
  --method PUT \
  --field required_status_checks='{"strict":true,"contexts":["build","test"]}' \
  --field enforce_admins=true \
  --field required_pull_request_reviews='{"required_approving_review_count":1}'
```

#### 存取日誌

```bash
# 定期檢查存取日誌
# 監控異常活動
# 設定警告通知

# 使用 GitHub API 檢查存取記錄
curl -H "Authorization: token $GITHUB_TOKEN" \
  https://api.github.com/repos/your-username/ai-prompting-guide/traffic/views
```

---

## 總結

本指南涵蓋了從零開始建立和部署 Docusaurus AI 提示詞指南網站的完整流程。主要步驟包括：

1. **環境準備**: 安裝 Node.js、Git 和必要工具
2. **項目設置**: 建立項目結構和配置文件
3. **GitHub 整合**: 設置倉庫、權限和自動化流程
4. **部署配置**: 配置 GitHub Pages 和 Actions 工作流程
5. **維護管理**: 定期更新、性能優化和安全防護

通過遵循本指南，你應該能夠：
- ✅ 成功部署一個功能完整的文檔網站
- ✅ 設置自動化的 CI/CD 流程
- ✅ 實現高性能的用戶體驗
- ✅ 建立可持續的維護流程

如果在部署過程中遇到問題，請參考常見問題排除章節，或者在 GitHub Issues 中尋求幫助。

---

**重要提醒**: 
- 記得將所有 `your-username` 替換為你的實際 GitHub 用戶名
- 根據實際需求調整配置文件中的 URL 和路徑
- 定期備份重要資料和配置
- 保持依賴項目的及時更新

祝你部署順利! 🚀