---
sidebar_position: 3
---

# Prompt 結構與解析

了解有效 prompts 的組成要素對於一致的 AI 互動至關重要。這份指南將拆解 prompt 的結構，並提供架構你指令的框架。

## CLEAR 框架

使用 **CLEAR** 框架來架構你的 prompts：

- **C**ontext（脈絡）- 設定場景和背景
- **L**ength（長度）- 指定輸出長度要求  
- **E**xamples（範例）- 需要時提供範例
- **A**ction（行動）- 定義具體任務
- **R**esults（結果）- 描述預期的輸出格式

### CLEAR 實際應用

```python
# 脈絡
"""你是一位資深軟體架構師，正在審查系統設計提案。"""

# 長度  
"""提供一份 800-1000 字的詳細審查報告。"""

# 範例
"""
回饋格式範例：
✅ 優點：[列出主要優點]
⚠️ 疑慮：[列出潛在問題]
💡 建議：[具體建議]
"""

# 行動
"""審查附件的微服務架構設計，重點關注可擴展性、可維護性和安全性。"""

# 結果
"""將你的回應結構化為正式的架構審查報告，包含優點、疑慮和建議等章節。"""
```

## 基本 Prompt 組成要素

### 1. 角色指派

定義 AI 應該扮演誰，以設定適當的脈絡和專業程度。

**基本角色：**
```python
"你是一位資料科學家..."
```

**進階角色與脈絡：**
```python
"""你是一位在財富 500 大零售公司任職的資深資料科學家，
擁有超過 10 年的顧客行為分析和預測建模經驗。
你擅長將複雜的數據洞察轉化為可執行的商業策略。"""
```

**多重角色：**
```python
"""你同時扮演兩個角色：
1. 技術架構師 - 確保可擴展性和效能
2. 商業分析師 - 考慮成本和資源影響"""
```

### 2. 任務定義

明確說明你要 AI 完成什麼。

**模糊的任務：**
```python
"幫我弄簡報"
```

**清楚的任務：**
```python
"""為非技術背景的高階主管聽眾，建立一份關於 AI 倫理的 20 分鐘簡報大綱，
包含重點講述要點、可能的問答主題，以及建議的視覺輔助素材。"""
```

**多步驟任務：**
```python
"""請依序完成以下步驟：
1. 分析提供的客戶回饋資料
2. 找出前 5 個重複出現的問題
3. 按嚴重程度分類問題（高/中/低）
4. 為每個高嚴重度問題提供具體的行動項目
5. 建立一份供利害關係人審閱的摘要報告"""
```

### 3. 脈絡設定

提供會影響輸出的相關背景資訊。

**時間脈絡：**
```python
"""背景：這是為了我們 2024 年第四季的董事會議準備的，
今年因為供應鏈中斷和市場波動充滿挑戰。"""
```

**受眾脈絡：**
```python
"""目標受眾：熟悉雲端架構但對 Kubernetes 部署策略陌生的技術主管。"""
```

**情境脈絡：**
```python
"""情況：我們的新創公司剛完成 A 輪募資，需要在 6 個月內
從 10 位工程師擴編到 50 位，同時維持程式碼品質。"""
```

### 4. 格式規範

明確定義你想要的輸出結構。

**簡單格式：**
```python
"將你的回應格式化為帶有簡短說明的編號清單。"
```

**結構化格式：**
```python
"""
使用以下結構來格式化你的回應：

## 執行摘要
[2-3 句概述]

## 關鍵發現
- 發現 1：[描述和影響]
- 發現 2：[描述和影響]

## 建議事項
1. **立即行動** (0-30 天)
2. **短期目標** (1-3 個月)  
3. **長期策略** (3-12 個月)

## 下一步行動
[具體行動項目與負責人]
"""
```

**範本格式：**
```python
"""每個產品評論都使用這個範本：

**產品：** [名稱]
**類別：** [類別]
**評分：** [1-5 星]
**優點：** [3-4 個要點]
**缺點：** [2-3 個要點]  
**最適合：** [目標使用者類型]
**性價比：** [評分理由]
"""
```

### 5. 限制條件與參數

設定清楚的界限和要求。

**長度限制：**
```python
"""
- 執行摘要：剛好 100 字
- 主要內容：800-1200 字
- 結論：50-75 字
"""
```

**風格限制：**
```python
"""
寫作風格要求：
- 專業但親切的語氣
- 使用主動語態
- 避免術語，除非有定義
- 包含相關統計數據
- 以國中程度的閱讀水準撰寫
"""
```

**內容限制：**
```python
"""
限制條件：
- 只聚焦於開源解決方案
- 預算上限：每年 150 萬台幣
- 必須與現有的 Salesforce 系統整合
- 需要符合 GDPR 和 CCPA 規範
"""
```

## 進階結構模式

### 1. 層級式 Prompting

將複雜任務分解為層級式組件。

```python
"""
主要目標：建立全面的行銷策略

第一層：策略框架
- 市場分析
- 競爭定位
- 目標受眾區隔

第二層：戰術計畫（針對每個第一層項目）
- 具體方案
- 資源需求
- 成功指標

第三層：執行細節（針對高優先順序戰術）
- 逐週行動計畫
- 負責單位
- 依賴關係與風險
"""
```

### 2. 條件邏輯

對複雜情境使用 if-then 陳述。

```python
"""
根據以下條件分析這段程式碼並提供回饋：

如果這是初學者的專案：
- 專注於基礎概念和最佳實務
- 提供鼓勵性的回饋與學習資源
- 建議漸進式改進

如果這是生產環境等級的程式碼：
- 強調安全性、效能和可維護性
- 標記潛在問題並標註嚴重程度
- 推薦架構改進方案

如果程式碼有安全漏洞：
- 立即標記所有安全問題
- 提供安全的替代方案與範例
- 用商業術語解釋風險
"""
```

### 3. 多角度分析

從不同觀點要求分析。

```python
"""
從三個角度評估這個商業提案：

🏢 高階主管角度：
- 策略一致性
- 投資報酬率和財務影響
- 風險評估

👨‍💻 技術角度：
- 實施複雜度
- 資源需求
- 技術風險和依賴關係

👥 使用者角度：
- 使用者體驗影響
- 採用挑戰
- 培訓和支援需求

針對每個角度，提供具體的疑慮和建議。
"""
```

## Prompt 優化技巧

### 1. 具體程度階梯

從廣泛開始，然後逐層增加具體性。

**第一級（基礎）：**
```python
"寫一些關於客戶服務的內容"
```

**第二級（有目標）：**
```python
"為 SaaS 公司寫一份客戶服務指南"
```

**第三級（具體）：**
```python
"為擁有 100+ 企業客戶的 B2B SaaS 公司撰寫客戶服務手冊，
重點放在技術支援升級程序"
```

**第四級（高度具體）：**
```python
"""為服務 100+ 企業客戶的 B2B SaaS 公司建立客戶服務手冊。

重點領域：
- 技術支援升級（L1→L2→L3）
- SLA 管理和溝通
- 企業客戶關係協議
- 知識庫優化

格式：包含流程圖、範本和指標的營運手冊
受眾：客戶成功經理和支援團隊主管
長度：3000-4000 字，附可執行的檢查清單"""
```

### 2. 漸進式增強

透過添加增強層來建構 prompts。

**基礎 Prompt：**
```python
"解釋機器學習演算法"
```

**+ 受眾：**
```python
"為企業高階主管解釋機器學習演算法"
```

**+ 脈絡：**
```python
"為正在考慮導入 AI 的企業高階主管解釋機器學習演算法"
```

**+ 格式：**
```python
"為正在考慮導入 AI 的企業高階主管解釋機器學習演算法，
結構化為決策框架"
```

**+ 範例：**
```python
"""為正在考慮導入 AI 的企業高階主管解釋機器學習演算法，
結構化為決策框架。

包含真實世界的例子，像是：
- Netflix 推薦系統
- 銀行業的詐騙偵測  
- 製造業的預測性維護"""
```

## 常見的結構錯誤

### 1. 埋藏的指令
**問題：** 關鍵指令隱藏在長文字中
**解決方案：** 把重要要求放在開頭或結尾

### 2. 矛盾的要求
**問題：** 要求「簡短但全面」的分析
**解決方案：** 優先排序要求並明確說明取捨

### 3. 不明確的成功標準
**問題：** 無法評估輸出是否符合期望
**解決方案：** 定義具體、可衡量的成功標準

### 4. 缺少脈絡層級
**問題：** 所有資訊都被視為同等重要
**解決方案：** 清楚標示什麼最重要

## 測試 Prompt 結構

### 品質檢查清單
- [ ] 角色明確定義，有適當的專業程度
- [ ] 任務分解為具體、可執行的組件  
- [ ] 提供脈絡但不資訊過載
- [ ] 明確指定輸出格式
- [ ] 清楚陳述限制和要求
- [ ] 可識別成功標準

### A/B 測試框架
1. 建立兩個不同結構的版本
2. 用相同的輸入資料測試
3. 跨維度比較輸出品質
4. 識別哪些結構元素能改善結果
5. 迭代和精煉

## 下一步

現在你已經了解 prompt 結構，來探索：
- **[常見模式](./common-patterns)** - 學習經過驗證的 prompting 技巧
- **[實用教學](/docs/tutorials/content-creation)** - 將結構應用到實際場景
- **[進階技巧](/docs/advanced/chain-of-thought)** - 複雜的 prompting 策略

:::tip 結構範本
儲存這個範本以便快速建構 prompt：
```
角色：[AI 應該扮演誰]
脈絡：[重要背景資訊]  
任務：[要執行的具體行動]
格式：[如何架構輸出]
限制：[限制條件和要求]
```
:::